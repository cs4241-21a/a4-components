(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{26:function(e,t,r){},37:function(e,t,r){"use strict";r.r(t);var a=r(1),n=r.n(a),s=r(19),c=r.n(s),o=(r(26),r(15)),i=r(4),l=r(2),u=r.n(l),d=r(6),b=r(13),j=r(3),m=r(10),p=r(11),h=function(e,t){switch(t.type){case"LOGIN":return localStorage.setItem("login",JSON.stringify({token:t.payload})),Object(j.a)(Object(j.a)({},e),{},{token:t.payload});case"LOGOUT":return localStorage.setItem("login",JSON.stringify(null)),Object(j.a)(Object(j.a)({},e),{},{token:null})}},O=r(0),f=Object(a.createContext)(),x=localStorage.getItem("login")?JSON.parse(localStorage.getItem("login")):{token:null},g=function(e){var t=e.children,r=Object(a.useReducer)(h,x),n=Object(m.a)(r,2),s=n[0],c=n[1],o=Object(j.a)(Object(j.a)({},s),{},{login:function(e){return c({type:"LOGIN",payload:e})},logout:function(){return c({type:"LOGOUT"})}});return Object(O.jsx)(f.Provider,{value:o,children:t})},v=function(e){var t=e.user,r=Object(i.f)(),n=Object(a.useContext)(f).logout;return Object(O.jsx)("nav",{className:"navbar navbar-expand-sm navbar-dark bg-dark","aria-label":"Navbar",children:Object(O.jsxs)("div",{className:"container-fluid",children:[Object(O.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbars","aria-controls":"navbars","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(O.jsx)("span",{className:"navbar-toggler-icon"})}),Object(O.jsx)("div",{className:"collapse navbar-collapse",id:"navbars"}),t&&Object(O.jsx)("div",{className:"ms-auto",children:Object(O.jsxs)("span",{className:"navbar-text",children:["Hello ",t.username,"!"]})}),Object(O.jsx)("div",{className:"ms-auto",children:Object(O.jsxs)("ul",{className:"navbar-nav ms-auto",children:[!t&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("li",{className:"nav-item",children:Object(O.jsx)("a",{className:"nav-link",href:"/register",children:"Register"})}),Object(O.jsx)("li",{className:"nav-item",children:Object(O.jsx)("a",{className:"nav-link",href:"/login",children:"Login"})})]}),t&&Object(O.jsx)("li",{className:"nav-item",children:Object(O.jsx)("button",{className:"nav-link",style:{backgroundColor:"transparent",border:"0px solid black"},onClick:function(){fetch("/api/logout",{method:"GET",credentials:"include"}).then(function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:e.sent.loggedOut&&(n(),r.push("/login"));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},children:"Logout"})})]})})]})})},N=function(){return Object(O.jsxs)("p",{className:"bg-dark rounded rounded-5 mt-3 p-2 d-flex align-items-center",children:[Object(O.jsx)("i",{className:"fa fa-github text-light fa-3x"}),Object(O.jsx)("a",{style:{cursor:"pointer"},href:"/api/auth/github",className:"link-info ms-3",children:"Login with Github"})]})},y=function(){var e=Object(i.f)(),t=Object(a.useContext)(f),r=t.token,n=t.login,s=Object(a.useState)({formData:{username:"",password:""},errors:{username:null,password:null}}),c=Object(m.a)(s,2),o=c[0],l=c[1];Object(a.useEffect)((function(){r&&e.push("/user/".concat(Object(p.a)(r).id))}),[r,e]);var h=function(e,t){l(Object(j.a)(Object(j.a)({},o),{},{formData:Object(j.a)(Object(j.a)({},o.formData),{},Object(b.a)({},e,t))}))},x=function(){fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:o.formData.username,password:o.formData.password})}).then(function(){var t=Object(d.a)(u.a.mark((function t(r){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.json();case 2:if(!(a=t.sent).errors){t.next=6;break}return l(Object(j.a)(Object(j.a)({},o),{},{errors:Object(j.a)(Object(j.a)({},o.errors),a.errors)})),t.abrupt("return");case 6:a.status&&"success"===a.status&&(n(a.token),e.push("/user/".concat(a.id)));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){alert("Login Request failed")}))};return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(v,{user:r&&Object(p.a)(r)}),Object(O.jsx)("div",{className:"container",children:Object(O.jsx)("div",{className:"row",children:Object(O.jsx)("div",{className:"col-sm-12 offset-md-2 col-md-8",children:Object(O.jsxs)("div",{className:"p-5 mb-4 bg-light rounded-3 border",children:[Object(O.jsx)("h2",{className:"text-center",children:"Login"}),Object(O.jsx)("div",{className:"row",children:Object(O.jsx)("div",{className:"col-sm-12 col-md-12 col-xs-12",children:Object(O.jsx)("form",{onSubmit:function(e){e.preventDefault(),x()},children:Object(O.jsxs)("div",{className:"form-group",children:[Object(O.jsx)("label",{className:"small mb-1 mt-3",htmlFor:"username",children:"Username: "}),Object(O.jsx)("input",{className:"form-control",placeholder:"Enter Your Username",name:"username",type:"text",value:o.formData.username,onChange:function(e){h("username",e.target.value)},required:!0}),o.errors.username&&Object(O.jsx)("p",{className:"small text-danger",children:o.errors.username}),Object(O.jsx)("label",{className:"small mb-1 mt-3",htmlFor:"password",children:"Password: "}),Object(O.jsx)("input",{className:"form-control",placeholder:"Password",name:"password",type:"password",onChange:function(e){h("password",e.target.value)},required:!0}),o.errors.password&&Object(O.jsx)("p",{className:"small text-danger",children:o.errors.password}),Object(O.jsx)("button",{className:"mt-3 btn btn-primary",type:"submit",onSubmit:function(e){e.preventDefault(),x()},children:"Log in"}),Object(O.jsx)(N,{}),Object(O.jsxs)("p",{className:"m=0 bg-dark text-light p-2 my-1 rounded rounded-5",children:["Don't have an account?",Object(O.jsx)("a",{href:"/register",className:"link-info",children:" Sign up here"})]})]})})})})]})})})})]})},k=function(){var e=Object(i.f)(),t=Object(a.useContext)(f),r=t.token,n=t.login,s=Object(a.useState)({formData:{username:"",password:"",confirmPassword:""},errors:{username:null,password:null}}),c=Object(m.a)(s,2),o=c[0],l=c[1];Object(a.useEffect)((function(){r&&e.push("/user/".concat(Object(p.a)(r).id))}));var h=Object(a.useCallback)((function(e,t){l(Object(j.a)(Object(j.a)({},o),{},{formData:Object(j.a)(Object(j.a)({},o.formData),{},Object(b.a)({},e,t))}))}),[o,l]),x=Object(a.useCallback)((function(t){t.preventDefault(),console.log("Register form submission"),fetch("/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:o.formData.username,password:o.formData.password,confirmPassword:o.formData.confirmPassword})}).then(function(){var t=Object(d.a)(u.a.mark((function t(r){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.json();case 2:if((a=t.sent).status&&"success"===a.status&&(n(a.token),e.push("/user/".concat(a.userId))),!a.errors){t.next=7;break}return l(Object(j.a)(Object(j.a)({},o),{},{errors:Object(j.a)(Object(j.a)({},o.errors),a.errors)})),t.abrupt("return");case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),[o,e,n]);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(v,{}),Object(O.jsx)("div",{className:"container",children:Object(O.jsx)("div",{className:"row",children:Object(O.jsx)("div",{className:"col-sm-12 offset-md-2 col-md-8",children:Object(O.jsxs)("div",{className:"p-5 mb-4 bg-light rounded-3 border",children:[Object(O.jsx)("h2",{className:"text-center",children:"Register"}),Object(O.jsx)("div",{className:"row",children:Object(O.jsx)("div",{className:"col-sm-12 col-md-12",children:Object(O.jsx)("form",{onSubmit:x,children:Object(O.jsxs)("div",{className:"form-group",children:[Object(O.jsx)("label",{className:"small mb-1 mt-3",htmlFor:"username",children:"Username: "}),Object(O.jsx)("input",{className:"form-control",placeholder:"Enter Your Username",name:"username",type:"text",onChange:function(e){h("username",e.target.value)},required:!0,defaultValue:o.formData?o.formData.username:""}),o.errors&&o.errors.username&&Object(O.jsx)("p",{className:"small text-danger",children:o.errors.username}),Object(O.jsx)("label",{className:"small mb-1 mt-3",htmlFor:"password",children:"Password: "}),Object(O.jsx)("input",{className:"form-control",placeholder:"Password",name:"password",type:"password",onChange:function(e){h("password",e.target.value)},required:!0}),Object(O.jsx)("label",{className:"small mb-1 mt-3",htmlFor:"password",children:"Confirm Password: "}),Object(O.jsx)("input",{className:"form-control",placeholder:"Confirm Password",name:"confirmPassword",type:"password",onChange:function(e){h("confirmPassword",e.target.value)},required:!0}),o.errors&&o.errors.password&&Object(O.jsx)("p",{className:"small text-danger",children:o.errors.password}),Object(O.jsx)("button",{className:"mt-3 btn btn-primary",type:"submit",onSubmit:x,children:"Register"}),Object(O.jsx)(N,{}),Object(O.jsxs)("p",{className:"bg-dark text-light p-2 my-2 rounded rounded-5",children:["Already have an account?",Object(O.jsx)("a",{href:"/login",className:"link-info",children:" Log in here"})]})]})})})})]})})})})]})},w=function(e){var t=e.task,r=e.i,a=e.editTask,n=e.delTask;return Object(O.jsxs)("tr",{children:[Object(O.jsxs)("td",{children:[Object(O.jsx)("label",{className:"d-inline",htmlFor:"title-".concat(r),"aria-label":"Task Title Input"}),Object(O.jsx)("input",{className:"form-control",id:"title-".concat(r),type:"text",defaultValue:t.title})]}),Object(O.jsxs)("td",{children:[Object(O.jsx)("label",{className:"d-inline",htmlFor:"description-".concat(r),"aria-label":"Task Description Input"}),Object(O.jsx)("input",{className:"form-control",id:"description-".concat(r),type:"text",defaultValue:t.description})]}),Object(O.jsxs)("td",{children:[Object(O.jsx)("label",{className:"d-inline",htmlFor:"priority-".concat(r),"aria-label":"Task Priority Input"}),Object(O.jsx)("input",{className:"form-control",type:"number",id:"priority-".concat(r),min:"0",max:"10",defaultValue:t.priority})]}),Object(O.jsxs)("td",{children:[Object(O.jsx)("label",{className:"d-inline",htmlFor:"dateCreated-".concat(r),"aria-label":"Task Date Created"}),Object(O.jsx)("input",{className:"form-control",id:"dateCreated-".concat(r),type:"text",value:t.dateCreated,readOnly:!0})]}),Object(O.jsxs)("td",{children:[Object(O.jsx)("label",{className:"d-inline",htmlFor:"deadline-".concat(r),"aria-label":"Task Deadline"}),Object(O.jsx)("input",{className:"form-control",id:"deadline-".concat(r),type:"text",value:t.deadline,readOnly:!0})]}),Object(O.jsx)("td",{children:Object(O.jsxs)("div",{className:"btn-group",children:[Object(O.jsx)("button",{onClick:function(e){a(r,t.title)},className:"btn btn-warning",children:"Save Edits"}),Object(O.jsx)("button",{onClick:function(e){n(t.title)},className:"btn btn-danger",children:"Delete"})]})})]},t._id)},S=function(){var e=Object(i.f)(),t=Object(i.g)().userId,r=Object(a.useState)({tasks:[]}),n=Object(m.a)(r,2),s=n[0],c=n[1],o=Object(a.useContext)(f),l=o.token,b=o.login,j=Object(a.useCallback)((function(){return fetch("/user/".concat(t),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:l})}).then(function(){var t=Object(d.a)(u.a.mark((function t(r){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.json();case 2:if((a=t.sent).errors&&(a.errors.login||a.errors.user)&&e.push("/login"),!a.errors){t.next=8;break}return console.log(a.errors),alert("An error occured"),t.abrupt("return");case 8:c({tasks:a.map((function(e){return Object.assign({},e)}))});case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){alert("Cannot fetch tasks"),console.log(e)}))}),[l,e,t]);Object(a.useEffect)((function(){if(!l){var r=!1;if(fetch("/user/check-auth",{method:"POST",credentials:"include"}).then(function(){var t=Object(d.a)(u.a.mark((function t(a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.json();case 2:if(n=t.sent,console.log(n),!n.errors){t.next=8;break}return e.push("/login"),console.log("push to login1"),t.abrupt("return");case 8:n.token&&(b(n.token),r=!0);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(){e.push("/login"),console.log("push to login2")})),!r)return}fetch("/user/exists",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t})}).then(function(){var t=Object(d.a)(u.a.mark((function t(r){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.json();case 2:if(a=t.sent,console.log(a),!a.errors){t.next=7;break}return e.push("/user/".concat(Object(p.a)(l).id)),t.abrupt("return");case 7:j();case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),[l,t,j,e,b]);var h=function(){var e=Object(d.a)(u.a.mark((function e(r,a){var n,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=parseInt(r),!(!(s=document.querySelector("#priority-".concat(n))).valueAsNumber&&0!==s.valueAsNumber||s.valueAsNumber<0||s.valueAsNumber>10)){e.next=5;break}return alert("Priority must be 0 - 10"),e.abrupt("return");case 5:fetch("/user/".concat(t,"/edit"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({oldTitle:a,newTitle:document.querySelector("#title-".concat(n)).value,description:document.querySelector("#description-".concat(n)).value,priority:s.valueAsNumber,token:l})}).then(function(){var e=Object(d.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:if(!(r=e.sent).error){e.next=6;break}return alert(r.error),e.abrupt("return");case 6:c({tasks:r.map((function(e){return Object.assign({},e)}))});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}));case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),x=function(){var e=Object(d.a)(u.a.mark((function e(r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("/user/".concat(t,"/delete"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:r,token:l})}).then(function(){var e=Object(d.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:r=e.sent,c({tasks:r.map((function(e){return Object.assign({},e)}))});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(d.a)(u.a.mark((function e(r){var a,n,s,o,i,b,j;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),a=new Date,n="".concat(String(a.getMonth()+1).padStart(2,"0"),"/")+"".concat(String(a.getDate()).padStart(2,"0"),"/").concat(a.getFullYear()),s=document.querySelector("#title"),o=document.querySelector("#description"),!(!(i=document.querySelector("#priority-range")).valueAsNumber&&0!==i.valueAsNumber||i.valueAsNumber<0||i.valueAsNumber>10)){e.next=9;break}return alert("Priority must be 0 - 10"),e.abrupt("return");case 9:return b={title:s.value,description:o.value,dateCreated:n,priority:i.valueAsNumber,token:l},j=JSON.stringify(b),fetch("/user/".concat(t,"/submit"),{method:"POST",headers:{"Content-Type":"application/json"},body:j}).then(function(){var e=Object(d.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:if(!(r=e.sent).error){e.next=6;break}return alert(r.error),e.abrupt("return");case 6:c({tasks:r.map((function(e){return Object.assign({},e)}))});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)("div",{children:[Object(O.jsx)(v,{user:l&&Object(p.a)(l)}),Object(O.jsxs)("div",{className:"container",children:[Object(O.jsx)("h1",{className:"display-1",children:"TODO List"}),Object(O.jsx)("p",{className:"lead",children:"Add tasks to a TODO list. All task titles must be unique. The priority of each task must be 0 - 10 where a higher number means a higher priority. You can edit tasks but they must be done one at a time. Deadlines for each task are auto-generated by the server based on the priority. Tasks are sorted in the table by priority in descending order."}),Object(O.jsxs)("div",{className:"row",children:[Object(O.jsx)("h2",{className:"h2",children:"Tasks"}),Object(O.jsxs)("table",{className:"table table-striped table-hover",children:[Object(O.jsx)("thead",{className:"table-dark",children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:"Task Title"}),Object(O.jsx)("th",{children:"Description"}),Object(O.jsx)("th",{children:"Priority"}),Object(O.jsx)("th",{children:"Date Created"}),Object(O.jsx)("th",{children:"Deadline"}),Object(O.jsx)("th",{})]})}),Object(O.jsx)("tbody",{id:"task-holder",children:s.tasks&&s.tasks.map((function(e,t){return Object(O.jsx)(w,{task:e,i:t,editTask:h,delTask:x})}))})]})]}),Object(O.jsxs)("form",{className:"border border-dark border-3 rounded rounded-5 p-3",children:[Object(O.jsx)("h3",{className:"h3",children:"Add a Task"}),Object(O.jsx)("label",{htmlFor:"title",className:"form-label mt-3",children:"Title:"}),Object(O.jsx)("input",{className:"form-control",type:"text",name:"title",id:"title",placeholder:"title",required:!0}),Object(O.jsx)("label",{htmlFor:"description",className:"form-label mt-3",children:"Description(optional):"}),Object(O.jsx)("input",{className:"form-control",type:"text",name:"description",id:"description",placeholder:"description"}),Object(O.jsx)("label",{htmlFor:"priority-range",className:"form-label mt-3",children:"Priority (0 - 10):"}),Object(O.jsx)("input",{id:"priority-range",type:"range",className:"form-range",min:"0",max:"10",step:"1",defaultValue:"5"}),Object(O.jsx)("button",{id:"addTask-btn",className:"btn btn-primary btn-lg mt-3",onClick:g,children:"Submit"})]})]})]})},T=function(e){var t=e.errorCode,r=e.errorMessage;return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("h1",{children:t}),Object(O.jsx)("p",{children:r})]})};var C=function(){return Object(O.jsx)(o.a,{children:Object(O.jsxs)(i.c,{children:[Object(O.jsx)(i.a,{exact:!0,path:"/",component:y}),Object(O.jsx)(i.a,{path:"/login",component:y}),Object(O.jsx)(i.a,{path:"/register",component:k}),Object(O.jsx)(i.a,{path:"/user/:userId/",component:S}),Object(O.jsx)(i.a,{path:"*",children:Object(O.jsx)(T,{errorCode:"404 Not Found",errorMessage:"The page you are looking for does not exist."})})]})})},D=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,38)).then((function(t){var r=t.getCLS,a=t.getFID,n=t.getFCP,s=t.getLCP,c=t.getTTFB;r(e),a(e),n(e),s(e),c(e)}))};c.a.render(Object(O.jsx)(n.a.StrictMode,{children:Object(O.jsx)(g,{children:Object(O.jsx)(C,{})})}),document.getElementById("root")),D()}},[[37,1,2]]]);
//# sourceMappingURL=main.7305bac7.chunk.js.map